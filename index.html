<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Ultra Large Scale QR Scanner</title>
    <script src="https://unpkg.com/jsqr@1.4.0/dist/jsQR.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
        }

        #backgroundVideo {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2;
            opacity: 0.25;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.35);
            z-index: -1;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-width: 1400px;
            margin: 0 auto;
            padding: 15px;
            position: relative;
            z-index: 10;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 15px;
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 800;
            text-shadow: 0 6px 12px rgba(0,0,0,0.4);
            margin-bottom: 8px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 10px #00ff88); }
            to { filter: drop-shadow(0 0 20px #00ff88); }
        }

        .header p {
            font-size: 1.3rem;
            opacity: 0.95;
            font-weight: 500;
        }

        .mega-scanner-container {
            position: relative;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(25px);
            border-radius: 30px;
            border: 2px solid rgba(255, 255, 255, 0.25);
            box-shadow: 0 30px 80px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            padding: 20px;
        }

        #scanner {
            width: 100%;
            max-width: 1000px; /* LARGER SCALE */
            height: 700px; /* LARGER SCALE */
            position: relative;
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 25px 60px rgba(0,0,0,0.4);
            border: 3px solid rgba(0, 255, 136, 0.3);
        }

        #video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* MEGA LARGE SCAN FRAME */
        .mega-scan-frame {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 450px; /* HUGE SCAN AREA */
            height: 450px; /* HUGE SCAN AREA */
            border: 4px solid #00ff88;
            border-radius: 20px;
            box-shadow: 
                0 0 30px #00ff88,
                inset 0 0 30px rgba(0, 255, 136, 0.2);
            animation: megaScanPulse 1.8s infinite;
        }

        @keyframes megaScanPulse {
            0%, 100% { 
                box-shadow: 0 0 30px #00ff88, inset 0 0 30px rgba(0, 255, 136, 0.2);
                border-width: 4px;
                transform: translate(-50%, -50%) scale(1);
            }
            50% { 
                box-shadow: 
                    0 0 60px #00ff88, 
                    0 0 90px #00ff88,
                    inset 0 0 50px rgba(0, 255, 136, 0.4);
                border-width: 5px;
                transform: translate(-50%, -50%) scale(1.02);
            }
        }

        /* MULTIPLE SCAN LINES FOR LARGER COVERAGE */
        .mega-scan-lines {
            position: absolute;
            top: 0;
            left: 15px;
            right: 15px;
            height: 4px;
            background: linear-gradient(90deg, transparent, #00ff88, #00ff88, transparent);
            animation: megaScanLine 1.8s infinite;
            box-shadow: 0 0 15px #00ff88;
        }

        .mega-scan-lines:nth-child(2) { animation-delay: 0.6s; }
        .mega-scan-lines:nth-child(3) { animation-delay: 1.2s; }

        @keyframes megaScanLine {
            0% { top: 0; opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        /* CORNER INDICATORS FOR LARGE QR */
        .corner {
            position: absolute;
            width: 25px;
            height: 25px;
            background: #00ff88;
            border-radius: 4px;
            box-shadow: 0 0 15px #00ff88;
            animation: cornerBlink 2s infinite;
        }

        .corner.top-left { top: 15px; left: 15px; }
        .corner.top-right { top: 15px; right: 15px; }
        .corner.bottom-left { bottom: 15px; left: 15px; }
        .corner.bottom-right { bottom: 15px; right: 15px; }

        @keyframes cornerBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        .status {
            text-align: center;
            color: white;
            font-size: 1.4rem;
            font-weight: 600;
            margin: 25px 0;
            min-height: 40px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .mega-controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 18px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
            min-width: 180px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(45deg, #ff6b6b, #feca57, #ff9ff3);
            color: white;
            box-shadow: 0 15px 40px rgba(255, 107, 107, 0.5);
        }

        .btn-primary:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 25px 60px rgba(255, 107, 107, 0.7);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.25);
            color: white;
            border: 3px solid rgba(255, 255, 255, 0.4);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: translateY(-3px) scale(1.03);
        }

        .result-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            backdrop-filter: blur(20px);
        }

        .result-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1e3c72, #2a5298, #00ff88);
            padding: 50px;
            border-radius: 30px;
            max-width: 95%;
            max-height: 95%;
            overflow-y: auto;
            color: white;
            text-align: center;
            box-shadow: 0 40px 100px rgba(0,0,0,0.7);
            border: 3px solid rgba(0, 255, 136, 0.5);
        }

        .result-content h2 {
            font-size: 2.5rem;
            margin-bottom: 25px;
            color: #00ff88;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.8);
        }

        .result-data {
            background: rgba(0, 0, 0, 0.4);
            padding: 30px;
            border-radius: 20px;
            margin: 25px 0;
            word-break: break-all;
            text-align: left;
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            border-left: 5px solid #00ff88;
            box-shadow: inset 0 0 20px rgba(0, 255, 136, 0.1);
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2.2rem; }
            #scanner { 
                height: 500px; 
                max-width: 95vw;
            }
            .mega-scan-frame { 
                width: 350px; 
                height: 350px; 
            }
            .mega-controls { flex-direction: column; align-items: center; }
            .btn { width: 300px; }
        }

        @media (max-width: 480px) {
            #scanner { height: 400px; }
            .mega-scan-frame { width: 280px; height: 280px; }
        }
    </style>
</head>
<body>
    <video id="backgroundVideo" autoplay muted loop>
        <source src="ca63eccfcf11bcd02c1a900196de630f_720w.mp4" type="video/mp4">
    </video>
    
    <div class="overlay"></div>

    <div class="container">
        <div class="header">
            <h1>üî• MEGA QR Scanner</h1>
            <p>Large Scale ‚Ä¢ Ultra Fast ‚Ä¢ ALL QR Formats</p>
        </div>

        <div class="mega-scanner-container">
            <div id="scanner">
                <video id="video" autoplay playsinline></video>
                <div class="mega-scan-frame">
                    <div class="mega-scan-lines"></div>
                    <div class="mega-scan-lines"></div>
                    <div class="mega-scan-lines"></div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
            
            <div class="status" id="status">üëÜ Click "START MEGA SCAN" - Massive QR Detection Ready!</div>
            
            <div class="mega-controls">
                <button class="btn btn-primary" id="startBtn">üöÄ START MEGA SCAN</button>
                <button class="btn btn-secondary" id="stopBtn" disabled>‚èπÔ∏è STOP SCAN</button>
            </div>
        </div>
    </div>

    <div class="result-modal" id="resultModal">
        <div class="result-content">
            <h2>üéâ MEGA SCAN SUCCESS!</h2>
            <div class="result-data" id="resultData"></div>
            <div style="margin-top: 40px;">
                <button class="btn btn-primary" id="executeBtn" style="margin-right: 20px; padding: 20px 50px; font-size: 1.2rem;">‚ö° INSTANT EXECUTE</button>
                <button class="btn btn-secondary" id="newScanBtn" style="padding: 20px 50px; font-size: 1.2rem;">üîÑ NEW MEGA SCAN</button>
            </div>
        </div>
    </div>

    <script>
        class MegaQRScanner {
            constructor() {
                this.video = document.getElementById('video');
                this.canvas = document.createElement('canvas');
                this.ctx = this.canvas.getContext('2d');
                this.stream = null;
                this.scanning = false;
                this.initElements();
                this.bindEvents();
            }

            initElements() {
                this.startBtn = document.getElementById('startBtn');
                this.stopBtn = document.getElementById('stopBtn');
                this.status = document.getElementById('status');
                this.resultModal = document.getElementById('resultModal');
                this.resultData = document.getElementById('resultData');
                this.executeBtn = document.getElementById('executeBtn');
                this.newScanBtn = document.getElementById('newScanBtn');
            }

            bindEvents() {
                this.startBtn.onclick = () => this.start();
                this.stopBtn.onclick = () => this.stop();
                this.newScanBtn.onclick = () => this.hideResult();
                this.executeBtn.onclick = () => this.executeResult();
            }

            async start() {
                try {
                    // HIGH RESOLUTION for large QR codes
                    this.stream = await navigator.mediaDevices.getUserMedia({
                        video: { 
                            facingMode: 'environment',
                            width: { ideal: 1920, min: 1280 },  // HIGHER RES
                            height: { ideal: 1080, min: 720 }   // HIGHER RES
                        }
                    });

                    this.video.srcObject = this.stream;
                    await this.video.play();
                    
                    this.updateUI(true);
                    this.scanning = true;
                    this.scanLoop();
                    
                    this.status.innerHTML = 'üì± <strong>MEGA SCAN ACTIVE</strong> - Large QR Detection Optimal';
                } catch (err) {
                    this.status.innerHTML = '‚ùå <strong>CAMERA ACCESS REQUIRED</strong> - Enable permissions';
                    console.error('Camera error:', err);
                }
            }

            stop() {
                if (this.stream) {
                    this.stream.getTracks().forEach(track => track.stop());
                }
                this.video.srcObject = null;
                this.scanning = false;
                this.updateUI(false);
                this.status.textContent = 'MEGA Scanner stopped. Ready for large scale scanning!';
            }

            updateUI(scanning) {
                this.startBtn.disabled = scanning;
                this.stopBtn.disabled = !scanning;
                this.startBtn.style.opacity = scanning ? '0.6' : '1';
                this.stopBtn.style.opacity = scanning ? '1' : '0.6';
            }

            scanLoop() {
                if (!this.scanning) return;

                if (this.video.readyState === this.video.HAVE_ENOUGH_DATA) {
                    // FULL HD CANVAS for maximum QR detection accuracy
                    this.canvas.width = this.video.videoWidth;
                    this.canvas.height = this.video.videoHeight;
                    this.ctx.drawImage(this.video, 0, 0);
                    
                    const imageData = this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height);
                    
                    // MULTIPLE SCAN PASSES for large QR codes
                    let code = jsQR(imageData.data, imageData.width, imageData.height);
                    
                    if (!code) {
                        // Try rotated scan for complex/large QRs
                        const rotatedImageData = this.rotateImageData(imageData, 90);
                        code = jsQR(rotatedImageData.data, rotatedImageData.width, rotatedImageData.height);
                    }
                    
                    if (code) {
                        this.onQRCodeDetected(code.data);
                        return;
                    }
                }
                
                requestAnimationFrame(() => this.scanLoop());
            }

            rotateImageData(imageData, degrees) {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = imageData.height;
                canvas.height = imageData.width;
                ctx.translate(canvas.width/2, canvas.height/2);
                ctx.rotate(degrees * Math.PI / 180);
                ctx.drawImage(
                    this.canvas, 
                    -imageData.width/2, -imageData.height/2
                );
                return ctx.getImageData(0, 0, canvas.width, canvas.height);
            }

            onQRCodeDetected(data) {
                this.scanning = false;
                this.status.innerHTML = 'üéâ <strong>MEGA QR DETECTED!</strong> Processing...';
                setTimeout(() => this.showResult(data), 500);
            }

            showResult(data) {
                this.resultData.innerHTML = `
                    <strong>üì± RAW DATA (Large Scale Scan):</strong><br><code>${data}</code><br><br>
                    <strong>üîó TYPE:</strong> ${this.detectContentType(data)}<br><br>
                    <strong>üìä LENGTH:</strong> ${data.length} chars | <strong>üîç CONFIDENCE:</strong> 100%<br><br>
                    <strong>‚ö° READY:</strong> Click EXECUTE for instant action
                `;
                this.resultModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }

            hideResult() {
                this.resultModal.style.display = 'none';
                document.body.style.overflow = 'hidden';
                this.start();
            }

            detectContentType(data) {
                if (data.startsWith('http://') || data.startsWith('https://') || data.startsWith('www.')) {
                    return 'üåê URL/LINK (Auto-Open)';
                } else if (data.includes('@') && data.includes('.')) {
                    return 'üìß EMAIL (Auto-Send)';
                } else if (/^\+?[\d\s\-\(\)]+$/.test(data.replace(/[\s\-\(\)]/g, ''))) {
                    return 'üìû PHONE (Auto-Call)';
                } else if (data.startsWith('bitcoin:') || data.startsWith('BTC') || data.startsWith('ETH')) {
                    return '‚Çø CRYPTO WALLET (Auto-Open)';
                } else if (data.includes(':') && data.includes('//')) {
                    return 'üîó DEEP LINK (Auto-Launch)';
                } else {
                    return 'üìÑ TEXT DATA (Auto-Copy)';
                }
            }

            executeResult() {
                const data = this.resultData.textContent.match(/RAW DATA.*?:(.+?)(?=<|$)/s)?.[1]?.trim();
                if (!data) return;

                try {
                    if (data.startsWith('http://') || data.startsWith('https://')) {
                        window.open(data, '_blank', 'noopener,noreferrer');
                    } else if (this.detectContentType(data).includes('Email')) {
                        window.location.href = `mailto:${data}`;
                    } else if (this.detectContentType(data).includes('Phone')) {
                        window.location.href = `tel:${data.replace(/[\s\-\(\)]/g, '')}`;
                    } else if (data.startsWith('bitcoin:') || data.startsWith('ethereum:')) {
                        window.open(data, '_blank');
                    } else {
                        navigator.clipboard.writeText(data).then(() => {
                            this.status.innerHTML = '‚úÖ <strong>LARGE DATA COPIED</strong> - Ready for mega scan!';
                            setTimeout(() => this.hideResult(), 2000);
                        });
                    }
                } catch (e) {
                    navigator.clipboard.writeText(data);
                    alert('‚ö° Executed/Copied: ' + data.substring(0, 100) + '...');
                    this.hideResult();
                }
            }
        }

        window.addEventListener('load', () => {
            new MegaQRScanner();
            
            const bgVideo = document.getElementById('backgroundVideo');
            bgVideo.play().catch(() => {
                document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            });
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelector('.result-modal').style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });
    </script>
</body>
</html>
